<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Kalendář směn 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .month-select {
            padding: 8px;
            font-size: 1em;
            border-radius: 4px;
            width: 120px;
            text-align: center;
        }
        .nav-btn {
            padding: 8px 16px;
            font-size: 1.2em;
            border: none;
            border-radius: 4px;
            background-color: #2196f3;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .nav-btn:hover {
            background-color: #1976d2;
        }
        .shift-select {
            display: flex;
            gap: 10px;
        }
        .shift-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #e0e0e0;
        }
        .shift-btn.active {
            background-color: #2196f3;
            color: white;
        }
        .calendar {
            display: flex;
            justify-content: center;
        }
        .month {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
        }
        .month-name {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }
        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }
        .day-header {
            font-weight: bold;
            padding: 10px;
            background: #f8f8f8;
        }
        .day {
            padding: 10px;
            border: 1px solid #ddd;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }
        .weekend {
            background-color: #fff3cd;
        }
        .current-day {
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
            font-weight: bold;
        }
        .shift-R {
            background-color: #e8f5e9;
            color: #1b5e20;
            font-weight: bold;
            margin-top: 5px;
            border: 1px solid #81c784;
        }
        .shift-N {
            background-color: #ffebee;
            color: #b71c1c;
            font-weight: bold;
            margin-top: 5px;
            border: 1px solid #e57373;
        }
        .legend {
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .legend-item {
            display: inline-block;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center;">Progres směny 2025</h1>
    
    <div class="controls">
        <button class="nav-btn" onclick="previousMonth()">←</button>
        <select id="monthSelect" class="month-select">
            <option value="0">Leden</option>
            <option value="1">Únor</option>
            <option value="2">Březen</option>
            <option value="3">Duben</option>
            <option value="4">Květen</option>
            <option value="5">Červen</option>
            <option value="6">Červenec</option>
            <option value="7">Srpen</option>
            <option value="8">Září</option>
            <option value="9">Říjen</option>
            <option value="10">Listopad</option>
            <option value="11">Prosinec</option>
        </select>
        <button class="nav-btn" onclick="nextMonth()">→</button>
        
        <div class="shift-select">
            <button class="shift-btn active" data-shift="A">Směna A</button>
            <button class="shift-btn" data-shift="B">Směna B</button>
            <button class="shift-btn" data-shift="C">Směna C</button>
            <button class="shift-btn" data-shift="D">Směna D</button>
        </div>
    </div>

    <div class="calendar" id="calendar"></div>

    <div class="legend">
        <div class="legend-item">R = Ranní směna</div>
        <div class="legend-item">N = Noční směna</div>
        <div class="legend-item">□ = Volno</div>
    </div>

    <script>
        let currentShift = 'A';

        function generateShifts(startDate, shiftType) {
            const shifts = [];
            let currentDate = new Date(startDate);
            const endDate = new Date('2025-12-31');
            
            const cycleLength = 12;
            let dayInCycle = 0;
            
            while (currentDate <= endDate) {
                let shift = '';
                
                switch(shiftType) {
                    case 'A':
                        if (dayInCycle < 3) shift = 'R';
                        else if (dayInCycle < 6) shift = '-';
                        else if (dayInCycle < 9) shift = 'N';
                        else shift = '-';
                        break;
                    case 'B':
                        if (dayInCycle < 3) shift = '-';
                        else if (dayInCycle < 6) shift = 'R';
                        else if (dayInCycle < 9) shift = '-';
                        else shift = 'N';
                        break;
                    case 'C':
                        if (dayInCycle < 3) shift = '-';
                        else if (dayInCycle < 6) shift = 'N';
                        else if (dayInCycle < 9) shift = '-';
                        else shift = 'R';
                        break;
                    case 'D':
                        if (dayInCycle < 3) shift = 'N';
                        else if (dayInCycle < 6) shift = '-';
                        else if (dayInCycle < 9) shift = 'R';
                        else shift = '-';
                        break;
                }
                
                shifts.push({
                    date: new Date(currentDate),
                    shift: shift
                });
                
                currentDate.setDate(currentDate.getDate() + 1);
                dayInCycle = (dayInCycle + 1) % cycleLength;
            }
            
            return shifts;
        }

        function createCalendar(shifts, selectedMonth) {
            const months = [
                'Leden', 'Únor', 'Březen', 'Duben', 'Květen', 'Červen',
                'Červenec', 'Srpen', 'Září', 'Říjen', 'Listopad', 'Prosinec'
            ];
            const dayNames = ['Po', 'Út', 'St', 'Čt', 'Pá', 'So', 'Ne'];
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            
            const today = new Date();
            const month = selectedMonth !== undefined ? selectedMonth : today.getMonth();
            
            const monthDiv = document.createElement('div');
            monthDiv.className = 'month';
            
            const monthName = document.createElement('div');
            monthName.className = 'month-name';
            monthName.textContent = months[month];
            monthDiv.appendChild(monthName);
            
            const daysDiv = document.createElement('div');
            daysDiv.className = 'days';
            
            dayNames.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                dayHeader.textContent = day;
                daysDiv.appendChild(dayHeader);
            });
            
            const firstDay = new Date(2025, month, 1);
            let startingDay = firstDay.getDay() || 7;
            startingDay--;
            
            for (let i = 0; i < startingDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'day';
                daysDiv.appendChild(emptyDay);
            }
            
            const daysInMonth = new Date(2025, month + 1, 0).getDate();
            for (let day = 1; day <= daysInMonth; day++) {
                const currentDate = new Date(2025, month, day);
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day';
                
                if (today.getDate() === day && 
                    today.getMonth() === month) {
                    dayDiv.classList.add('current-day');
                }
                
                if (currentDate.getDay() === 0 || currentDate.getDay() === 6) {
                    dayDiv.classList.add('weekend');
                }
                
                dayDiv.innerHTML = day;
                
                const shiftDay = shifts.find(s => 
                    s.date.getFullYear() === currentDate.getFullYear() &&
                    s.date.getMonth() === currentDate.getMonth() &&
                    s.date.getDate() === currentDate.getDate()
                );
                
                if (shiftDay && shiftDay.shift !== '-') {
                    dayDiv.classList.add(`shift-${shiftDay.shift}`);
                    const shiftSpan = document.createElement('div');
                    shiftSpan.textContent = shiftDay.shift;
                    dayDiv.appendChild(shiftSpan);
                }
                
                daysDiv.appendChild(dayDiv);
            }
            
            monthDiv.appendChild(daysDiv);
            calendar.appendChild(monthDiv);
        }

        // Inicializace kalendáře
        function initCalendar() {
            const today = new Date();
            document.getElementById('monthSelect').value = today.getMonth();
            const yearShifts = generateShifts('2025-01-04', currentShift);
            createCalendar(yearShifts, today.getMonth());
        }

        // Event listeners
        document.getElementById('monthSelect').addEventListener('change', function(e) {
            const yearShifts = generateShifts('2025-01-04', currentShift);
            createCalendar(yearShifts, parseInt(e.target.value));
        });

        document.querySelectorAll('.shift-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentShift = this.dataset.shift;
                const yearShifts = generateShifts('2025-01-04', currentShift);
                createCalendar(yearShifts, parseInt(document.getElementById('monthSelect').value));
            });
        });

        // Aktualizace aktuálního data každou minutu
        setInterval(() => {
            const yearShifts = generateShifts('2025-01-04', currentShift);
            createCalendar(yearShifts, parseInt(document.getElementById('monthSelect').value));
        }, 60000);

        // Funkce pro navigaci mezi měsíci
        function previousMonth() {
            const select = document.getElementById('monthSelect');
            let currentMonth = parseInt(select.value);
            if (currentMonth > 0) {
                select.value = currentMonth - 1;
                const yearShifts = generateShifts('2025-01-04', currentShift);
                createCalendar(yearShifts, currentMonth - 1);
            }
        }

        function nextMonth() {
            const select = document.getElementById('monthSelect');
            let currentMonth = parseInt(select.value);
            if (currentMonth < 11) {
                select.value = currentMonth + 1;
                const yearShifts = generateShifts('2025-01-04', currentShift);
                createCalendar(yearShifts, currentMonth + 1);
            }
        }

        // Přidání klávesových zkratek pro navigaci
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                previousMonth();
            } else if (e.key === 'ArrowRight') {
                nextMonth();
            }
        });

        // Spuštění kalendáře
        initCalendar();
    </script>
</body>
</html>
